webpackJsonp([1],{"+0JL":function(e,t){},"+9Hw":function(e,t){},"1xV1":function(e,t){},"89lh":function(e,t){},LjqR:function(e,t){},"N/m/":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("7+uW"),i={name:"App",data:function(){return{}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(e){a("YDKk")},null,null).exports,r=a("/ocq"),o={data:function(){return{formLabelLogin:{username:"",password:"",remember:!0},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{submit:function(){"admin"===this.formLabelLogin.username&&"admin"===this.formLabelLogin.password?(localStorage.setItem("username",this.formLabelLogin.username),this.$router.push("/service-admin")):this.$message.error("用户名或密码错误")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"管理运行平台管理系统",visible:!0,"show-close":!1,width:"600px"}},[a("el-form",{ref:"formLabelLogin",attrs:{"label-position":"right","label-width":"80px",rules:e.loginRules,model:e.formLabelLogin}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off",spellcheck:"false"},model:{value:e.formLabelLogin.username,callback:function(t){e.$set(e.formLabelLogin,"username",t)},expression:"formLabelLogin.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",spellcheck:"false"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.formLabelLogin.password,callback:function(t){e.$set(e.formLabelLogin,"password",t)},expression:"formLabelLogin.password"}})],1),e._v(" "),a("el-form-item",[a("el-checkbox",{model:{value:e.formLabelLogin.remember,callback:function(t){e.$set(e.formLabelLogin,"remember",t)},expression:"formLabelLogin.remember"}},[e._v("记住密码")]),e._v(" "),a("span",{staticStyle:{"margin-left":"20px",color:"#bbb"}},[e._v("密码有效时间为24小时")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(o,c,!1,function(e){a("LjqR")},null,null).exports,u={data:function(){return{name:"Admin"}},computed:{username:function(){var e=localStorage.getItem("username");return e||this.name}},methods:{handleCommand:function(e){"loginout"==e&&(localStorage.removeItem("username"),this.$router.push("/login"))}}},m={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"header"},[l("div",{staticClass:"logo"},[e._v("管理运行平台ESB管理与监控系统")]),e._v(" "),l("div",{staticClass:"user-info"},[l("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[l("span",{staticClass:"el-dropdown-link"},[l("img",{staticClass:"user-logo",attrs:{src:a("ZYPB")}}),e._v("\n                  "+e._s(e.username)+"\n              ")]),e._v(" "),l("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[l("el-dropdown-item",{attrs:{command:"loginout"}},[e._v("退出")])],1)],1)],1)])},staticRenderFns:[]};var v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{attrs:{"default-active":e.onRoutes,id:"el-menu-vertical-demo","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:!0}},[a("el-menu-item",{attrs:{index:"service-admin"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("服务管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"route-admin"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("路由管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"system"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("系统用户")])]),e._v(" "),a("el-menu-item",{attrs:{index:"log"}},[a("i",{staticClass:"el-icon-setting"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("日志")])]),e._v(" "),a("el-submenu",{attrs:{index:"/"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",[e._v("系统监控")])]),e._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"mq-admin"}},[e._v("MQ监控")])],1),e._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"ws-admin"}},[e._v("WS监控")])],1)],2)],1)},staticRenderFns:[]};var p={components:{vHead:a("VU/8")(u,m,!1,function(e){a("+0JL")},"data-v-ee3b9316",null).exports,vSidebar:a("VU/8")({name:"homepage",data:function(){return{}},computed:{onRoutes:function(){return this.$route.path.replace("/","")}}},v,!1,function(e){a("N/m/")},null,null).exports}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper"},[t("v-head"),this._v(" "),t("v-sidebar"),this._v(" "),t("div",{staticClass:"content"},[t("transition",{attrs:{name:"move",mode:"out-in"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(p,_,!1,function(e){a("iqDb")},null,null).exports,f={data:function(){return{api:this.$store.state.api+"/api/route-config",tableData:[],tableVisibleData:[],cur_page:1,select_word:"",detail:{},detailVisible:!1,addData:{SERVICE_CODE:"",SERVICE_VERSION:"1.0",SENDER_ORG:"",SENDER:"",RECEIVER_ORG:"",RECEIVER:"",ENABLED_FLAG:"",REMARK:""},addVisible:!1,total:0,editData:{SERVICE_CODE:"",SERVICE_VERSION:"",SENDER_ORG:"",SENDER:"",RECEIVER_ORG:"",RECEIVER:"",ENABLED_FLAG:"",REMARK:""},editVisible:!1,editID:"",detail_CN:{REMARK:"备注",insert_TIMESTAMP:"插入时间",last_UPDATE_TIMESTAMP:"上次更新时间",pk_ROUTE:"数据库主键ID",sender_ORG:"发送平台",sender:"发送系统",receiver_ORG:"接收平台",receiver:"接收系统",service_CODE:"服务编号",service_VERSION:"服务版本",creator:"创建者",enabled_FLAG:"是否可用(1为可用，0为不可用)",remark:"备注",modifier:"修改者"}}},methods:{getData:function(){var e=this;this.axios.get(this.api+"/select-all").then(function(t){e.tableData=t.data.data,console.log(e.tableData),e.setVisibleData()})},add:function(){var e=this,t=this.$loading({lock:!0,text:"数据同步中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get(this.$store.state.api+"/sync-route").then(function(a){t.close(),e.$notify({title:"同步成功",message:"受影响数据条数为："+a.data.count,duration:3e3}),e.getData(),e.getPage()}).catch(function(a){t.close(),e.$notify({title:"同步失败",message:"检查接口是否可用",duration:3e3})})},search:function(){var e=this;this.axios.get(this.api+"/selectbycondition",{params:{key:this.select_word.toUpperCase()}}).then(function(t){e.tableData=t.data.data,e.total=t.data.data.length,e.cur_page=1,e.setVisibleData()})},handleSelectionChange:function(){},handleEdit:function(e,t){this.editID=t.pk_ROUTE,this.editData.SERVICE_CODE=t.service_CODE,this.editData.SERVICE_VERSION=t.service_VERSION,this.editData.SENDER_ORG=t.sender_ORG,this.editData.SENDER=t.sender,this.editData.RECEIVER_ORG=t.receiver_ORG,this.editData.RECEIVER=t.receiver,this.editData.ENABLED_FLAG=t.enable_FLAG,this.editData.REMARK=t.remark,this.editVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.axios({method:"delete",url:a.api+"/delete",data:t}).then(function(e){200===e.data.code&&(a.getPage(),a.getData(),a.$message({message:"删除成功!",type:"success"})),400===e.data.code&&a.$message.error("删除出现错误！")}).catch(function(){a.$message({type:"info",message:"已取消删除"})})})},handleDetail:function(e,t){console.log(t),this.detail=t,this.detailVisible=!0},addItem:function(){var e=this;this.axios.post(this.api+"/add",this.addData).then(function(t){200===t.data.code&&(e.getPage(),e.getData(),e.$message({message:"新增成功",type:"success"}),e.initData(e.addData)),400===t.data.code&&e.$message.error("新增出现问题")}),this.getData(),this.addVisible=!1},handleCurrentChange:function(e){this.cur_page=e},getPage:function(){var e=this;this.axios.get(this.api+"/selectpageamount").then(function(t){e.total=t.data.data})},setVisibleData:function(){for(var e=10*(this.cur_page-1)+1,t=10*this.cur_page,a=[],l=0;l<this.tableData.length;l++)l>=e-1&&l<=t-1&&a.push(this.tableData[l]);this.tableVisibleData=a},editItem:function(){var e=this;this.editData.PK_ROUTE=this.editID,this.axios.post(this.api+"/update",this.editData).then(function(t){200===t.data.code&&(e.getData(),e.$message({message:"修改成功",type:"success"})),400===t.data.code&&e.$message.error("更新出现问题"),e.editVisible=!1})}},created:function(){this.getData(),this.getPage()},watch:{cur_page:function(){console.log(this.cur_page),this.setVisibleData()}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"route-admin"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("路由管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("路由列表")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.add}},[e._v("数据同步")]),e._v(" "),a("div",{staticStyle:{display:"inline-block",width:"300px"}},[a("el-input",{attrs:{placeholder:"筛选关键词",id:"handle-input"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableVisibleData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"pk_ROUTE",label:"Route ID",width:"245"}}),e._v(" "),a("el-table-column",{attrs:{prop:"service_CODE",label:"服务编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sender_ORG",label:"发送平台"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sender",label:"发送者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiver_ORG",label:"接收平台"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiver",label:"接收者"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",fixed:"right",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":10},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"详细信息",visible:e.detailVisible,modal:!1},on:{"update:visible":function(t){e.detailVisible=t}}},[a("table",{staticClass:"add-message",attrs:{border:"0",cellspacing:"3",cellpadding:"3"}},[a("tr",[a("th",[e._v(" key ")]),e._v(" "),a("th",[e._v(" value ")])]),e._v(" "),e._l(e.detail,function(t,l){return a("tr",[a("td",{attrs:{width:"230"}},[e._v("\n          "+e._s(e.detail_CN[l])+"\n        ")]),e._v(" "),a("td",[e._v(e._s(t))])])})],2),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detailVisible=!1}}},[e._v("确定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新增路由",visible:e.addVisible,modal:!1,"custom-class":"edit-dialog"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{attrs:{model:e.addData,"label-width":"80px",inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"服务编号"}},[a("el-input",{model:{value:e.addData.SERVICE_CODE,callback:function(t){e.$set(e.addData,"SERVICE_CODE",t)},expression:"addData.SERVICE_CODE"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务版本"}},[a("el-input",{model:{value:e.addData.SERVICE_VERSION,callback:function(t){e.$set(e.addData,"SERVICE_VERSION",t)},expression:"addData.SERVICE_VERSION"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送平台"}},[a("el-select",{model:{value:e.addData.SENDER_ORG,callback:function(t){e.$set(e.addData,"SENDER_ORG",t)},expression:"addData.SENDER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发送系统"}},[a("el-select",{model:{value:e.addData.SENDER,callback:function(t){e.$set(e.addData,"SENDER",t)},expression:"addData.SENDER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接收平台"}},[a("el-select",{model:{value:e.addData.RECEIVER_ORG,callback:function(t){e.$set(e.addData,"RECEIVER_ORG",t)},expression:"addData.RECEIVER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接收系统"}},[a("el-select",{model:{value:e.addData.RECEIVER,callback:function(t){e.$set(e.addData,"RECEIVER",t)},expression:"addData.RECEIVER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"ENABLED"}},[a("el-select",{model:{value:e.addData.ENABLED_FLAG,callback:function(t){e.$set(e.addData,"ENABLED_FLAG",t)},expression:"addData.ENABLED_FLAG"}},[a("el-option",{attrs:{label:"是",value:1}}),e._v(" "),a("el-option",{attrs:{label:"否",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"说明信息"}},[a("div",{staticStyle:{width:"450px"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入说明信息",size:"medium"},model:{value:e.addData.REMARK,callback:function(t){e.$set(e.addData,"REMARK",t)},expression:"addData.REMARK"}})],1)])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addItem}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑路由",visible:e.editVisible,modal:!1,"custom-class":"edit-dialog"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{attrs:{model:e.addData,"label-width":"80px",inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"服务编号"}},[a("el-input",{model:{value:e.editData.SERVICE_CODE,callback:function(t){e.$set(e.editData,"SERVICE_CODE",t)},expression:"editData.SERVICE_CODE"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务版本"}},[a("el-input",{model:{value:e.editData.SERVICE_VERSION,callback:function(t){e.$set(e.editData,"SERVICE_VERSION",t)},expression:"editData.SERVICE_VERSION"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送平台"}},[a("el-select",{model:{value:e.editData.SENDER_ORG,callback:function(t){e.$set(e.editData,"SENDER_ORG",t)},expression:"editData.SENDER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发送系统"}},[a("el-select",{model:{value:e.editData.SENDER,callback:function(t){e.$set(e.editData,"SENDER",t)},expression:"editData.SENDER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接收平台"}},[a("el-select",{model:{value:e.editData.RECEIVER_ORG,callback:function(t){e.$set(e.editData,"RECEIVER_ORG",t)},expression:"editData.RECEIVER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接收系统"}},[a("el-select",{model:{value:e.editData.RECEIVER,callback:function(t){e.$set(e.editData,"RECEIVER",t)},expression:"editData.RECEIVER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"ENABLED"}},[a("el-select",{model:{value:e.editData.ENABLED_FLAG,callback:function(t){e.$set(e.editData,"ENABLED_FLAG",t)},expression:"editData.ENABLED_FLAG"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"说明信息"}},[a("div",{staticStyle:{width:"450px"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入说明信息",size:"medium"},model:{value:e.editData.REMARK,callback:function(t){e.$set(e.editData,"REMARK",t)},expression:"editData.REMARK"}})],1)])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editItem}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,E,!1,function(e){a("+9Hw")},null,null).exports,D={data:function(){return{api:this.$store.state.api+"/api/service",tableData:[],tableVisibleData:[],cur_page:1,select_word:"",detail:{},detailVisible:!1,addData:{SERVICE_CODE:"",SERVICE_VERSION:"1.0",OWNER_ORG:"",OWNER:"",TYPE:"",ENABLED_FLAG:"",REMARK:""},addVisible:!1,total:0,editData:{SERVICE_CODE:"",SERVICE_VERSION:"",OWNER_ORG:"",OWNER:"",TYPE:"",ENABLED_FLAG:"",REMARK:""},editVisible:!1,editID:"",detail_CN:{REMARK:"备注",insert_TIMESTAMP:"插入时间",last_UPDATE_TIMESTAMP:"上次更新时间",pk_SERVICE:"数据库主键ID",type:"服务类型",owner_ORG:"所属平台",owner:"所属系统",service_CODE:"服务编号",service_VERSION:"服务版本",creator:"创建者",enabled_FLAG:"是否可用(1为可用，0为不可用)",remark:"备注",modifier:"修改者"}}},methods:{getData:function(){var e=this;this.axios.get(this.api+"/select-all").then(function(t){e.tableData=t.data.data,console.log(e.tableData),e.setVisibleData()})},add:function(){var e=this,t=this.$loading({lock:!0,text:"数据同步中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get(this.$store.state.api+"/sync-service").then(function(a){t.close(),e.$notify({title:"同步成功",message:"受影响数据条数为："+a.data.count,duration:3e3}),e.getData(),e.getPage()}).catch(function(a){t.close(),e.$notify({title:"同步失败",message:"检查接口是否可用",duration:3e3})})},search:function(){var e=this;this.axios.get(this.api+"/selectservicebycondition",{params:{key:this.select_word.toUpperCase()}}).then(function(t){e.tableData=t.data.data,e.total=t.data.data.length,e.cur_page=1,e.setVisibleData()})},handleSelectionChange:function(){},handleEdit:function(e,t){this.editID=t.pk_SERVICE,this.editData.SERVICE_CODE=t.service_CODE,this.editData.SERVICE_VERSION=t.service_VERSION,this.editData.OWNER_ORG=t.owner_ORG,this.editData.OWNER=t.owner,this.editData.TYPE=t.type,this.editData.ENABLED_FLAG=t.enabled_FLAG,this.editData.REMARK=t.remark,this.editVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.axios({method:"delete",url:a.api+"/delete",data:t}).then(function(e){200===e.data.code&&(a.getPage(),a.getData(),a.$message({message:"删除成功!",type:"success"})),400===e.data.code&&a.$message.error("删除出现错误！")}).catch(function(){a.$message({type:"info",message:"已取消删除"})})})},handleDetail:function(e,t){this.detail=t,this.detailVisible=!0},addItem:function(){var e=this;this.axios.post(this.api+"/add",this.addData).then(function(t){200===t.data.code&&(e.getPage(),e.getData(),e.$message({message:"新增成功",type:"success"}),e.initData(e.addData)),400===t.data.code&&e.$message.error("新增出现问题")}),this.getData(),this.addVisible=!1},handleCurrentChange:function(e){this.cur_page=e},getPage:function(){var e=this;this.axios.get(this.api+"/selectpageamount").then(function(t){e.total=t.data.data})},setVisibleData:function(){for(var e=10*(this.cur_page-1)+1,t=10*this.cur_page,a=[],l=0;l<this.tableData.length;l++)l>=e-1&&l<=t-1&&a.push(this.tableData[l]);this.tableVisibleData=a},editItem:function(){var e=this;this.editData.PK_SERVICE=this.editID,this.axios.post(this.api+"/update",this.editData).then(function(t){200===t.data.code&&(e.getData(),e.$message({message:"修改成功",type:"success"})),400===t.data.code&&e.$message.error("更新出现问题"),e.editVisible=!1})},initData:function(e){for(var t in e)e[t]=""}},created:function(){this.getData(),this.getPage()},watch:{cur_page:function(){console.log(this.cur_page),this.setVisibleData()}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"service-admin"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("服务管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("服务列表")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.add}},[e._v("数据同步")]),e._v(" "),a("div",{staticStyle:{display:"inline-block",width:"300px"}},[a("el-input",{attrs:{placeholder:"筛选关键词",id:"service-handle-input"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableVisibleData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"pk_SERVICE",label:"Service ID",width:"240"}}),e._v(" "),a("el-table-column",{attrs:{prop:"service_CODE",label:"服务编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"owner_ORG",label:"所属平台"}}),e._v(" "),a("el-table-column",{attrs:{prop:"owner",label:"服务名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"服务类型"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",fixed:"right",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":10},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"详细信息",visible:e.detailVisible,modal:!1},on:{"update:visible":function(t){e.detailVisible=t}}},[a("table",{staticClass:"detail-message",attrs:{border:"0",cellspacing:"3",cellpadding:"3"}},[a("tr",[a("th",[e._v(" key ")]),e._v(" "),a("th",[e._v(" value ")])]),e._v(" "),e._l(e.detail,function(t,l){return a("tr",[a("td",{attrs:{width:"230"}},[e._v("\n            "+e._s(e.detail_CN[l])+"\n          ")]),e._v(" "),a("td",[e._v(e._s(t))])])})],2),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detailVisible=!1}}},[e._v("确定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新增服务",visible:e.addVisible,modal:!1},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{attrs:{model:e.addData,"label-width":"80px",inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"服务编号"}},[a("el-input",{model:{value:e.addData.SERVICE_CODE,callback:function(t){e.$set(e.addData,"SERVICE_CODE",t)},expression:"addData.SERVICE_CODE"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务版本"}},[a("el-input",{model:{value:e.addData.SERVICE_VERSION,callback:function(t){e.$set(e.addData,"SERVICE_VERSION",t)},expression:"addData.SERVICE_VERSION"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属平台"}},[a("el-select",{model:{value:e.addData.OWNER_ORG,callback:function(t){e.$set(e.addData,"OWNER_ORG",t)},expression:"addData.OWNER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属系统"}},[a("el-select",{model:{value:e.addData.OWNER,callback:function(t){e.$set(e.addData,"OWNER",t)},expression:"addData.OWNER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"服务类型"}},[a("el-select",{model:{value:e.addData.TYPE,callback:function(t){e.$set(e.addData,"TYPE",t)},expression:"addData.TYPE"}},e._l(this.$store.state.serviceType,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"ENABLED"}},[a("el-select",{model:{value:e.addData.ENABLED_FLAG,callback:function(t){e.$set(e.addData,"ENABLED_FLAG",t)},expression:"addData.ENABLED_FLAG"}},[a("el-option",{attrs:{label:"是",value:1}}),e._v(" "),a("el-option",{attrs:{label:"否",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"说明信息"}},[a("div",{staticStyle:{width:"450px"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入说明信息",size:"medium"},model:{value:e.addData.REMARK,callback:function(t){e.$set(e.addData,"REMARK",t)},expression:"addData.REMARK"}})],1)])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addItem}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑服务",visible:e.editVisible,modal:!1},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{attrs:{model:e.addData,"label-width":"80px",inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"服务编号"}},[a("el-input",{model:{value:e.editData.SERVICE_CODE,callback:function(t){e.$set(e.editData,"SERVICE_CODE",t)},expression:"editData.SERVICE_CODE"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务版本"}},[a("el-input",{model:{value:e.editData.SERVICE_VERSION,callback:function(t){e.$set(e.editData,"SERVICE_VERSION",t)},expression:"editData.SERVICE_VERSION"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属平台"}},[a("el-select",{model:{value:e.editData.OWNER_ORG,callback:function(t){e.$set(e.editData,"OWNER_ORG",t)},expression:"editData.OWNER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属系统"}},[a("el-select",{model:{value:e.editData.OWNER,callback:function(t){e.$set(e.editData,"OWNER",t)},expression:"editData.OWNER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"服务类型"}},[a("el-select",{model:{value:e.editData.TYPE,callback:function(t){e.$set(e.editData,"TYPE",t)},expression:"editData.TYPE"}},e._l(this.$store.state.serviceType,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"ENABLED"}},[a("el-select",{model:{value:e.editData.ENABLED_FLAG,callback:function(t){e.$set(e.editData,"ENABLED_FLAG",t)},expression:"editData.ENABLED_FLAG"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"说明信息"}},[a("div",{staticStyle:{width:"450px"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入说明信息",size:"medium"},model:{value:e.editData.REMARK,callback:function(t){e.$set(e.editData,"REMARK",t)},expression:"editData.REMARK"}})],1)])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editItem}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var R=a("VU/8")(D,g,!1,function(e){a("kzcI")},null,null).exports,C=a("fZjL"),V=a.n(C),S={data:function(){return{api:this.$store.state.api+"/api/msgflow",filter:{LOG_TIMESTAMP:"",showError:!1,sender_org:"",sender:"",receiver_org:"",receiver:"",service_code:""},form:{mindate:"",maxdate:"",sender_org:"",sender:"",receiver_org:"",receiver:"",type:!1,page:"1",service_code:""},tableData:[],tableVisibleData:[],total:0,cur_page:1,detailVisible:!1,detailData:{sender_org:"",sender:"",receiver_org:"",receiver:"",service_code:"",service_version:"",requestDate:"",responseDate:"",requestMsg:"",responseMsg:"",isSuccess:!0},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},systemusers:{},platforms:[],platformsMap:{DDXP:"数据交换平台",ADXP:"生产运行平台",MDXP:"管理运行平台",SDXP:"安全运行平台",FDXP:"服务运行平台"},receiveOrg:[],senderOrg:[]}},methods:{getData:function(){var e=this;this.form.page="1",this.axios.post(this.api+"/selectmsg",this.form).then(function(t){if(e.tableVisibleData=t.data.data,""!=e.tableVisibleData||null!=e.tableVisibleData)for(var a=0;a<e.tableVisibleData.length;a++)e.tableVisibleData[a].log_TIMESTAMP=e.tableVisibleData[a].log_TIMESTAMP.substring(0,19);e.total=t.data.number})},handleSelectionChange:function(){},handleDetail:function(e,t){var a=this,l=this.$loading({lock:!0,text:"正在拉取日志详情",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post(this.api+"/selectmsgbynumber",{serial_number:t.serial_NUMBER}).then(function(e){l.close(),a.detailVisible=!0;var t=e.data.data;a.detailData.sender_org=t[0].sender_ORG,a.detailData.sender=t[0].sender,a.detailData.receiver_org=t[0].receiver_ORG,a.detailData.receiver=t[0].receiver,a.detailData.service_code=t[0].service_CODE,a.detailData.service_version=t[0].service_VERSION,1===t[0].msg_TYPE?t.length>1?(a.detailData.requestDate=t[0].log_TIMESTAMP,a.detailData.responseDate=t[1].log_TIMESTAMP,a.detailData.requestMsg=t[0].msg,a.detailData.responseMsg=t[1].msg):(a.detailData.requestDate=t[0].log_TIMESTAMP,a.detailData.requestMsg=t[0].msg,a.detailData.responseDate="无记录",a.detailData.responseMsg="无记录"):t.length>1?(a.detailData.requestDate=t[1].log_TIMESTAMP,a.detailData.responseDate=t[0].log_TIMESTAMP,a.detailData.requestMsg=t[1].msg,a.detailData.responseMsg=t[0].msg):(a.detailData.responseDate=t[0].log_TIMESTAMP,a.detailData.responseMsg=t[0].msg,a.detailData.requestDate="无记录",a.detailData.requestDate="无记录"),3!==t[0].msg_TYPE&&3!==t[1].msg_TYPE||(a.detailData.isSuccess=!1)}).catch(function(e){})},handleCurrentChange:function(e){this.form.page=e,this.getData()},clear:function(){this.filter.LOG_TIMESTAMP="",this.filter.sender_org="",this.filter.sender="",this.filter.receiver_org="",this.filter.receiver="",this.filter.service_code=""},getSystemusers:function(){var e=this;this.axios.get(this.api+"/systemuser").then(function(t){e.systemusers=t.data,e.platforms=V()(t.data)})},receiveChange:function(e){this.receiveOrg=this.systemusers[e]},senderChange:function(e){console.log(e),this.senderOrg=this.systemusers[e]}},watch:{filter:{handler:function(e,t){this.form.mindate=this.filter.LOG_TIMESTAMP[0]||"",this.form.maxdate=this.filter.LOG_TIMESTAMP[1]||"",this.form.sender_org=this.filter.sender_org,this.form.sender=this.filter.sender,this.form.receiver_org=this.filter.receiver_org,this.form.receiver=this.filter.receiver,this.form.type=this.filter.showError,this.form.service_code=this.filter.service_code},deep:!0},cur_page:function(){this.setVisibleData()}},created:function(){this.getSystemusers()},computed:{}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("日志")]),e._v(" "),a("el-breadcrumb-item",[e._v("日志查询")])],1)],1),e._v(" "),a("el-collapse",{attrs:{value:"1"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[e._v("\n        日志查询选项"),a("i",{staticClass:"el-icon-search"})]),e._v(" "),a("div",[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini"}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.filter.LOG_TIMESTAMP,callback:function(t){e.$set(e.filter,"LOG_TIMESTAMP",t)},expression:"filter.LOG_TIMESTAMP"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"服务接收平台"}},[a("el-select",{on:{change:e.receiveChange},model:{value:e.filter.receiver_org,callback:function(t){e.$set(e.filter,"receiver_org",t)},expression:"filter.receiver_org"}},e._l(this.platforms,function(e){return a("el-option",{attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"服务接收系统"}},[a("el-select",{model:{value:e.filter.receiver,callback:function(t){e.$set(e.filter,"receiver",t)},expression:"filter.receiver"}},e._l(this.receiveOrg,function(e){return a("el-option",{attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"服务发送平台"}},[a("el-select",{on:{change:e.senderChange},model:{value:e.filter.sender_org,callback:function(t){e.$set(e.filter,"sender_org",t)},expression:"filter.sender_org"}},e._l(this.platforms,function(e){return a("el-option",{attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"服务发送系统"}},[a("el-select",{model:{value:e.filter.sender,callback:function(t){e.$set(e.filter,"sender",t)},expression:"filter.sender"}},e._l(this.senderOrg,function(e){return a("el-option",{attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"服务编码"}},[a("el-input",{staticStyle:{width:"400px"},model:{value:e.filter.service_code,callback:function(t){e.$set(e.filter,"service_code",t)},expression:"filter.service_code"}})],1)],1),e._v(" "),a("div",[a("el-form-item",[a("el-switch",{attrs:{"active-text":"不包含错误信息","inactive-text":"所有日志记录"},model:{value:e.filter.showError,callback:function(t){e.$set(e.filter,"showError",t)},expression:"filter.showError"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"28px"}},[a("el-button",{on:{click:e.clear}},[e._v("清空过滤项")])],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1)],1)],1)],2)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableVisibleData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"log_TIMESTAMP",label:"记录时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sender_ORG",label:"发送平台"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sender",label:"发送者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiver_ORG",label:"接收平台"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiver",label:"接收者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"service_CODE",label:"服务编号",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",fixed:"right",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":10},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"日志详情",visible:e.detailVisible,modal:!1,"custom-class":"edit-dialog",width:"800px"},on:{"update:visible":function(t){e.detailVisible=t}}},[a("div",{staticClass:"detail-row detail1"},[a("span",{staticClass:"detail-row-1"},[a("span",[e._v("请求平台：")]),a("span",[e._v(e._s(e.detailData.sender_org))])]),e._v(" "),a("span",{staticClass:"detail-row-2"},[a("span",[e._v("请求系统：")]),a("span",[e._v(e._s(e.detailData.sender))])])]),e._v(" "),a("div",{staticClass:"detail-row detail2"},[a("span",{staticClass:"detail-row-1"},[a("span",[e._v("接收平台：")]),a("span",[e._v(e._s(e.detailData.receiver_org))])]),e._v(" "),a("span",{staticClass:"detail-row-2"},[a("span",[e._v("接收系统：")]),a("span",[e._v(e._s(e.detailData.receiver))])])]),e._v(" "),a("div",{staticClass:"detail-row detail1"},[a("span",{staticClass:"detail-row-1"},[a("span",[e._v("服务编号：")]),a("span",[e._v(e._s(e.detailData.service_code))])]),e._v(" "),a("span",{staticClass:"detail-row-2"},[a("span",[e._v("服务版本：")]),a("span",[e._v(e._s(e.detailData.service_version))])])]),e._v(" "),a("div",{staticClass:"detail-row detail2"},[a("span",{staticClass:"detail-row-1"},[a("span",[e._v("请求时间：")]),a("span",[e._v(e._s(e.detailData.requestDate))])]),e._v(" "),a("span",{staticClass:"detail-row-2"},[e.detailData.isSuccess?a("span",[a("span",[e._v("响应时间：")]),a("span",[e._v(e._s(e.detailData.responseDate))])]):a("span",[a("span",[e._v("错误时间：")]),a("span",[e._v(e._s(e.detailData.responseDate))])])])]),e._v(" "),a("div",{staticStyle:{height:"250px"}},[a("div",{staticClass:"detail-msg detail-msg-1"},[a("div",[e._v("请求报文：")]),e._v(" "),a("div",{staticClass:"detail-msg-content"},[a("pre",[e._v(e._s(e.detailData.requestMsg))])])]),e._v(" "),a("div",{staticClass:"detail-msg detail-msg-2"},[a("div",[e._v("响应报文：")]),e._v(" "),a("div",{staticClass:"detail-msg-content"},[a("pre",[e._v(e._s(e.detailData.responseMsg))])])])])])],1)},staticRenderFns:[]};var x=a("VU/8")(S,I,!1,function(e){a("89lh")},null,null).exports,O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mq-admin"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-location"}),e._v("MQ监控")]),e._v(" "),a("el-breadcrumb-item",[e._v("综合管理平台")])],1)],1),e._v(" "),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[e._v("\n        Local Queue Managers"),a("i",{staticClass:"header-icon el-icon-info"})]),e._v(" "),a("div",{staticStyle:{"padding-left":"20px"}},[a("table",{attrs:{width:"500",cellspacing:"0",cellpadding:"3"}},[a("tr",{staticStyle:{"background-color":"#eee"},attrs:{align:"left"}},[a("th",[e._v("name")]),e._v(" "),a("th",[e._v("status")])]),e._v(" "),a("tr",[a("td",[e._v(e._s(e.qmgr.name))]),e._v(" "),"running"==this.qmgr.status?a("td",{staticStyle:{color:"#0cdb1e"}},[a("i",{staticClass:"el-icon-loading"}),e._v("Running")]):a("td",[e._v("disable")])])])])],2),e._v(" "),a("el-collapse-item",{attrs:{title:"Listeners 监听器",name:"2"}},[a("div",{staticStyle:{"padding-left":"20px"}},[a("table",{attrs:{width:"500",cellspacing:"0",cellpadding:"3"}},[a("tr",{staticStyle:{"background-color":"#eee"},attrs:{align:"left"}},[a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Port")]),e._v(" "),a("th",[e._v("Listener Status")])]),e._v(" "),a("tr",[a("td",[e._v(e._s(e.listener.name))]),e._v(" "),a("td",[e._v(e._s(e.listener.port))]),e._v(" "),"running"==this.listener.status?a("td",{staticStyle:{color:"#0cdb1e"}},[a("i",{staticClass:"el-icon-loading"}),e._v("Running")]):a("td",[e._v("disable")])])])])]),e._v(" "),a("el-collapse-item",{attrs:{title:"Queue",name:"3"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.queueVisible,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"Name"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"Type"}}),e._v(" "),a("el-table-column",{attrs:{prop:"currentdepth",label:"CurrentDepth"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":10},on:{"current-change":e.handleCurrentChange}})],1)],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")({data:function(){return{api:this.$store.state.api,qmgr:{name:"",status:""},listener:{name:"",port:"",status:""},queue:[],activeNames:["1","2","3"],cur_page:1,queueVisible:[],total:0}},methods:{getManagers:function(){var e=this;this.axios.get(this.api+"/api/Mqadmin/qmgr").then(function(t){e.qmgr.name=t.data.data[0].name,"RUNNING"===t.data.data[0].status?e.qmgr.status="running":e.qmgr.status="disabled"})},getListeners:function(){var e=this;this.axios.get(this.api+"/api/Mqadmin/qmgr/listener").then(function(t){e.listener.name=t.data.data[0].name,e.listener.port=t.data.data[0].port,"MQSVC_STATUS_RUNNING"===t.data.data[0].status?e.listener.status="running":e.listener.status="disable"})},getQueens:function(){var e=this;this.axios.get(this.api+"/api/Mqadmin/qmgr/queue").then(function(t){e.queue=t.data.data,e.total=e.queue.length,e.setVisibleData()})},handleCurrentChange:function(e){this.cur_page=e,this.setVisibleData()},setVisibleData:function(){for(var e=10*(this.cur_page-1)+1,t=10*this.cur_page,a=[],l=0;l<this.queue.length;l++)l>=e-1&&l<=t-1&&a.push(this.queue[l]);this.queueVisible=a}},created:function(){this.getManagers(),this.getListeners(),this.getQueens()}},O,!1,function(e){a("UAIn")},null,null).exports,k={data:function(){return{filter:{platform:"",service_code:"",time:[]},tableData:[],tableVisibleData:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},methods:{getData:function(){var e=this;this.axios.get("../../../static/WS-data.json").then(function(t){e.tableData=t.data})}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mq-admin"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-location"}),e._v("WS监控")]),e._v(" "),a("el-breadcrumb-item",[e._v("接入平台管理")])],1)],1),e._v(" "),a("el-collapse",{attrs:{value:"1"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[e._v("\n        WS状态查询选项"),a("i",{staticClass:"el-icon-search"})]),e._v(" "),a("div",[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini"}},[a("div",[a("el-form-item",{attrs:{label:"平台名称"}},[a("el-select",{model:{value:e.filter.platform,callback:function(t){e.$set(e.filter,"platform",t)},expression:"filter.platform"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"服务编码"}},[a("el-input",{model:{value:e.filter.service_code,callback:function(t){e.$set(e.filter,"service_code",t)},expression:"filter.service_code"}})],1)],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.filter.time,callback:function(t){e.$set(e.filter,"time",t)},expression:"filter.time"}})],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1)])],1)],2)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"platform",label:"接入平台"}}),e._v(" "),a("el-table-column",{attrs:{prop:"service_code",label:"服务编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"调用总数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"success",label:"成功调用次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fail",label:"失败调用次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rate",label:"调用失败比例"}}),e._v(" "),a("el-table-column",{attrs:{prop:"last",label:"最近一次调用状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"last_time",label:"最近一次调用成功时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"last_fail",label:"最近一次调用失败时间"}})],1)],1)},staticRenderFns:[]};var N=a("VU/8")(k,$,!1,function(e){a("1xV1")},null,null).exports,w={data:function(){return{api:this.$store.state.api+"/api/system",tableData:[],tableVisibleData:[],cur_page:1,select_word:"",detail:{},detailVisible:!1,addData:{SERVICE_CODE:"",SERVICE_VERSION:"1.0",SENDER_ORG:"",SENDER:"",RECEIVER_ORG:"",RECEIVER:"",ENABLED_FLAG:"",REMARK:""},addVisible:!1,total:0,editData:{SERVICE_CODE:"",SERVICE_VERSION:"",SENDER_ORG:"",SENDER:"",RECEIVER_ORG:"",RECEIVER:"",ENABLED_FLAG:"",REMARK:""},editVisible:!1,editID:"",detail_CN:{insert_TIMESTAMP:"插入时间",last_UPDATE_TIMESTAMP:"上次更新时间",pk_SYSTEMUSER:"数据库主键ID",creator:"创建者",modifier:"修改者",systemuser_ORG:"系统用户平台",systemuser_CODE:"系统用户编码",systemuser_DESC:"系统用户描述"}}},methods:{getData:function(){var e=this;this.axios.get(this.api+"/select-all").then(function(t){e.tableData=t.data.data,console.log(e.tableData),e.setVisibleData()})},add:function(){var e=this,t=this.$loading({lock:!0,text:"数据同步中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get(this.$store.state.api+"/sync-system").then(function(a){t.close(),e.$notify({title:"同步成功",message:"受影响数据条数为："+a.data.count,duration:3e3}),e.getData(),e.getPage()}).catch(function(a){t.close(),e.$notify({title:"同步失败",message:"检查接口是否可用",duration:3e3})})},search:function(){var e=this;this.axios.get(this.api+"/selectbycondition",{params:{key:this.select_word.toUpperCase()}}).then(function(t){e.tableData=t.data.data,e.total=t.data.data.length,e.cur_page=1,e.setVisibleData()})},handleSelectionChange:function(){},handleEdit:function(e,t){this.editID=t.pk_ROUTE,this.editData.SERVICE_CODE=t.service_CODE,this.editData.SERVICE_VERSION=t.service_VERSION,this.editData.SENDER_ORG=t.sender_ORG,this.editData.SENDER=t.sender,this.editData.RECEIVER_ORG=t.receiver_ORG,this.editData.RECEIVER=t.receiver,this.editData.ENABLED_FLAG=t.enable_FLAG,this.editData.REMARK=t.remark,this.editVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.axios({method:"delete",url:a.api+"/delete",data:t}).then(function(e){200===e.data.code&&(a.getPage(),a.getData(),a.$message({message:"删除成功!",type:"success"})),400===e.data.code&&a.$message.error("删除出现错误！")}).catch(function(){a.$message({type:"info",message:"已取消删除"})})})},handleDetail:function(e,t){this.detail=t,this.detailVisible=!0},addItem:function(){var e=this;this.axios.post(this.api+"/add",this.addData).then(function(t){200===t.data.code&&(e.getPage(),e.getData(),e.$message({message:"新增成功",type:"success"}),e.initData(e.addData)),400===t.data.code&&e.$message.error("新增出现问题")}),this.getData(),this.addVisible=!1},handleCurrentChange:function(e){this.cur_page=e},getPage:function(){var e=this;this.axios.get(this.api+"/selectpageamount").then(function(t){e.total=t.data.data})},setVisibleData:function(){for(var e=10*(this.cur_page-1)+1,t=10*this.cur_page,a=[],l=0;l<this.tableData.length;l++)l>=e-1&&l<=t-1&&a.push(this.tableData[l]);this.tableVisibleData=a},editItem:function(){var e=this;this.editData.PK_ROUTE=this.editID,this.axios.post(this.api+"/update",this.editData).then(function(t){200===t.data.code&&(e.getData(),e.$message({message:"修改成功",type:"success"})),400===t.data.code&&e.$message.error("更新出现问题"),e.editVisible=!1})}},created:function(){this.getData(),this.getPage()},watch:{cur_page:function(){console.log(this.cur_page),this.setVisibleData()}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"route-admin"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v("接入系统")]),e._v(" "),a("el-breadcrumb-item",[e._v("系统列表")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.add}},[e._v("数据同步")]),e._v(" "),a("div",{staticStyle:{display:"inline-block",width:"300px"}},[a("el-input",{attrs:{placeholder:"筛选关键词",id:"handle-input"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableVisibleData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"pk_SYSTEMUSER",label:"System User ID",width:"245"}}),e._v(" "),a("el-table-column",{attrs:{prop:"systemuser_CODE",label:"系统用户编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"systemuser_ORG",label:"系统用户平台"}}),e._v(" "),a("el-table-column",{attrs:{prop:"insert_TIMESTAMP",label:"插入时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"last_UPDATE_TIMESTAMP",label:"上次修改时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建者"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",fixed:"right",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":10},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"详细信息",visible:e.detailVisible,modal:!1},on:{"update:visible":function(t){e.detailVisible=t}}},[a("table",{staticClass:"detail-message",attrs:{border:"0",cellspacing:"3",cellpadding:"3"}},[a("tr",[a("th",[e._v(" key ")]),e._v(" "),a("th",[e._v(" value ")])]),e._v(" "),e._l(e.detail,function(t,l){return a("tr",[a("td",{attrs:{width:"230"}},[e._v("\n            "+e._s(e.detail_CN[l])+"\n          ")]),e._v(" "),a("td",[e._v(e._s(t))])])})],2),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detailVisible=!1}}},[e._v("确定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新增路由",visible:e.addVisible,modal:!1,"custom-class":"edit-dialog"},on:{"update:visible":function(t){e.addVisible=t}}},[a("table",{staticClass:"edit-route",attrs:{border:"0",cellspacing:"0"}},e._l(e.addData,function(t,l){return a("tr",[a("el-tag",[a("td",{attrs:{width:"120"}},[e._v("\n            "+e._s(l)+"\n          ")])]),e._v(" "),a("td",[a("el-input",{attrs:{size:"mini"},model:{value:e.addData[l],callback:function(t){e.$set(e.addData,l,t)},expression:"addData[key]"}})],1)],1)}),0),e._v(" "),a("el-form",{attrs:{model:e.addData,"label-width":"80px",inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"服务编号"}},[a("el-input",{model:{value:e.addData.SERVICE_CODE,callback:function(t){e.$set(e.addData,"SERVICE_CODE",t)},expression:"addData.SERVICE_CODE"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务版本"}},[a("el-input",{model:{value:e.addData.SERVICE_VERSION,callback:function(t){e.$set(e.addData,"SERVICE_VERSION",t)},expression:"addData.SERVICE_VERSION"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送平台"}},[a("el-select",{model:{value:e.addData.SENDER_ORG,callback:function(t){e.$set(e.addData,"SENDER_ORG",t)},expression:"addData.SENDER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发送系统"}},[a("el-select",{model:{value:e.addData.SENDER,callback:function(t){e.$set(e.addData,"SENDER",t)},expression:"addData.SENDER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接收平台"}},[a("el-select",{model:{value:e.addData.RECEIVER_ORG,callback:function(t){e.$set(e.addData,"RECEIVER_ORG",t)},expression:"addData.RECEIVER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接收系统"}},[a("el-select",{model:{value:e.addData.RECEIVER,callback:function(t){e.$set(e.addData,"RECEIVER",t)},expression:"addData.RECEIVER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"ENABLED"}},[a("el-select",{model:{value:e.addData.ENABLED_FLAG,callback:function(t){e.$set(e.addData,"ENABLED_FLAG",t)},expression:"addData.ENABLED_FLAG"}},[a("el-option",{attrs:{label:"是",value:1}}),e._v(" "),a("el-option",{attrs:{label:"否",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"说明信息"}},[a("div",{staticStyle:{width:"450px"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入说明信息",size:"medium"},model:{value:e.addData.REMARK,callback:function(t){e.$set(e.addData,"REMARK",t)},expression:"addData.REMARK"}})],1)])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addItem}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑路由",visible:e.editVisible,modal:!1,"custom-class":"edit-dialog"},on:{"update:visible":function(t){e.editVisible=t}}},[a("table",{staticClass:"edit-route",attrs:{border:"0",cellspacing:"3",cellpadding:"3"}},e._l(e.editData,function(t,l){return a("tr",{staticClass:"edit-route-tr"},[a("el-tag",{staticClass:"edit-route-td",attrs:{type:"success"}},[a("td",{attrs:{width:"120"}},[e._v("\n            "+e._s(l)+"\n          ")])]),e._v(" "),a("td",[a("el-input",{attrs:{size:"mini"},model:{value:e.editData[l],callback:function(t){e.$set(e.editData,l,t)},expression:"editData[key]"}})],1)],1)}),0),e._v(" "),a("el-form",{attrs:{model:e.addData,"label-width":"80px",inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"服务编号"}},[a("el-input",{model:{value:e.editData.SERVICE_CODE,callback:function(t){e.$set(e.editData,"SERVICE_CODE",t)},expression:"editData.SERVICE_CODE"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务版本"}},[a("el-input",{model:{value:e.editData.SERVICE_VERSION,callback:function(t){e.$set(e.editData,"SERVICE_VERSION",t)},expression:"editData.SERVICE_VERSION"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送平台"}},[a("el-select",{model:{value:e.editData.SENDER_ORG,callback:function(t){e.$set(e.editData,"SENDER_ORG",t)},expression:"editData.SENDER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发送系统"}},[a("el-select",{model:{value:e.editData.SENDER,callback:function(t){e.$set(e.editData,"SENDER",t)},expression:"editData.SENDER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接收平台"}},[a("el-select",{model:{value:e.editData.RECEIVER_ORG,callback:function(t){e.$set(e.editData,"RECEIVER_ORG",t)},expression:"editData.RECEIVER_ORG"}},e._l(this.$store.state.platform,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接收系统"}},[a("el-select",{model:{value:e.editData.RECEIVER,callback:function(t){e.$set(e.editData,"RECEIVER",t)},expression:"editData.RECEIVER"}},e._l(this.$store.state.system.MDXP,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"ENABLED"}},[a("el-select",{model:{value:e.editData.ENABLED_FLAG,callback:function(t){e.$set(e.editData,"ENABLED_FLAG",t)},expression:"editData.ENABLED_FLAG"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"说明信息"}},[a("div",{staticStyle:{width:"450px"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入说明信息",size:"medium"},model:{value:e.editData.REMARK,callback:function(t){e.$set(e.editData,"REMARK",t)},expression:"editData.REMARK"}})],1)])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editItem}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")(w,A,!1,function(e){a("o/zw")},null,null).exports;l.default.use(r.a);var L=new r.a({routes:[{path:"/",redirect:"/login"},{path:"/home",component:b,children:[{path:"/service-admin",component:R},{path:"/route-admin",component:h},{path:"/log",component:x},{path:"/mq-admin",component:y},{path:"/ws-admin",component:N},{path:"/system",component:M}]},{path:"/login",component:d}]}),G=a("NYxO");l.default.use(G.a);var T=new G.a.Store({state:{api:"",platform:[{value:"DDXP",label:"数据交换平台"},{value:"ADXP",label:"生产运行平台"},{value:"MDXP",label:"管理运行平台"},{value:"SDXP",label:"安全运行平台"},{value:"FDXP",label:"服务运行平台"}],system:{MDXP:[{value:"HR",label:"人力资源管理系统"},{value:"PAM",label:"资产管理系统"},{value:"FINM",label:"财务管理系统"},{value:"SMS",label:"安全信息管理系统"}]},serviceType:[{value:"M",label:"MQ"},{value:"W",label:"WebService"}]},mutations:{}}),P=a("mtWM"),F=a.n(P),q=a("Rf8U"),B=a.n(q),z=(a("uMhA"),a("zL8q")),K=a.n(z);a("tvR6");l.default.config.productionTip=!1,l.default.use(B.a,F.a),l.default.use(K.a,{size:"small"}),new l.default({el:"#app",router:L,store:T,components:{App:n},template:"<App/>"})},UAIn:function(e,t){},YDKk:function(e,t){},ZYPB:function(e,t,a){e.exports=a.p+"static/img/img.2aab7b4.jpg"},iqDb:function(e,t){},kzcI:function(e,t){},"o/zw":function(e,t){},tvR6:function(e,t){},uMhA:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b6ef6e96e89b3f5af44d.js.map